<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 5.4.2">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&family=Arvo:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&family=JetBrains+Mono:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"scatteredream.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":true,"version":"8.23.0","exturl":false,"sidebar":{"position":"right","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":true,"style":"flat"},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js" defer></script>

    <meta name="description" content="Linux 概述Unix家族在unix编写过程中发明出了新的编程语言: C  GNU: 自由软件运动FreeBSD: 允许闭源 GPL: GNU General Public License 不允许闭源 MIT: 声明MIT即可  Linux 发行版 Linux vs. Windows 文件系统Linux用正斜杠表示路径，一切皆文件  虚拟目录，只是逻辑上的关系，分区和挂载点才会决定物理存放位置的">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux 基本命令">
<meta property="og:url" content="http://scatteredream.github.io/2024/11/30/408-OS-Linux/index.html">
<meta property="og:site_name" content="scatteredream&#39;s blog">
<meta property="og:description" content="Linux 概述Unix家族在unix编写过程中发明出了新的编程语言: C  GNU: 自由软件运动FreeBSD: 允许闭源 GPL: GNU General Public License 不允许闭源 MIT: 声明MIT即可  Linux 发行版 Linux vs. Windows 文件系统Linux用正斜杠表示路径，一切皆文件  虚拟目录，只是逻辑上的关系，分区和挂载点才会决定物理存放位置的">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241007165031608.png">
<meta property="og:image" content="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241007170423889.png">
<meta property="og:image" content="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241007171216031.png">
<meta property="og:image" content="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241007171911495.png">
<meta property="og:image" content="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241007174437116.png">
<meta property="og:image" content="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241007182423055.png">
<meta property="og:image" content="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241007200741497.png">
<meta property="og:image" content="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241007215205758.png">
<meta property="og:image" content="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241007220244669.png">
<meta property="og:image" content="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241007220336304.png">
<meta property="og:image" content="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241008174512092.png">
<meta property="og:image" content="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241008174709567.png">
<meta property="og:image" content="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241007004917995-1728748475007-17.png">
<meta property="og:image" content="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241010090300035-1728747968346-1.png">
<meta property="og:image" content="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241010090221898-1728747968346-2.png">
<meta property="og:image" content="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241010090640183-1728747968346-3.png">
<meta property="og:image" content="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241010091128239-1728747968347-7.png">
<meta property="og:image" content="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241010095017952-1728747968346-6.png">
<meta property="og:image" content="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241010095906439-1728747968346-4.png">
<meta property="og:image" content="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241010154836707-1728747968346-5.png">
<meta property="og:image" content="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241010165557595-1728747968347-8.png">
<meta property="og:image" content="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241104184639596.png">
<meta property="article:published_time" content="2024-11-29T16:00:00.000Z">
<meta property="article:modified_time" content="2025-05-05T03:37:38.720Z">
<meta property="article:author" content="碎梦">
<meta property="article:tag" content="linux">
<meta property="article:tag" content="docker">
<meta property="article:tag" content="nginx">
<meta property="article:tag" content="ssh">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241007165031608.png">


<link rel="canonical" href="http://scatteredream.github.io/2024/11/30/408-OS-Linux/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://scatteredream.github.io/2024/11/30/408-OS-Linux/","path":"2024/11/30/408-OS-Linux/","title":"Linux 基本命令"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Linux 基本命令 | scatteredream's blog</title>
  








  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script>
<script src="/js/utils.js" defer></script><script src="/js/motion.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous" defer></script>
<script src="/js/third-party/search/local-search.js" defer></script>







  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">scatteredream's blog</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="搜索..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Linux-%E6%A6%82%E8%BF%B0"><span class="nav-number">1.</span> <span class="nav-text">Linux 概述</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Unix%E5%AE%B6%E6%97%8F"><span class="nav-number">1.1.</span> <span class="nav-text">Unix家族</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#GNU-%E8%87%AA%E7%94%B1%E8%BD%AF%E4%BB%B6%E8%BF%90%E5%8A%A8"><span class="nav-number">1.2.</span> <span class="nav-text">GNU: 自由软件运动</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Linux-%E5%8F%91%E8%A1%8C%E7%89%88"><span class="nav-number">1.3.</span> <span class="nav-text">Linux 发行版</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Linux-vs-Windows"><span class="nav-number">1.4.</span> <span class="nav-text">Linux vs. Windows</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="nav-number">2.</span> <span class="nav-text">文件系统</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Vim"><span class="nav-number">3.</span> <span class="nav-text">Vim</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E8%88%AC%E6%A8%A1%E5%BC%8F"><span class="nav-number">3.1.</span> <span class="nav-text">一般模式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BC%96%E8%BE%91%E6%A8%A1%E5%BC%8F"><span class="nav-number">3.2.</span> <span class="nav-text">编辑模式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F"><span class="nav-number">3.3.</span> <span class="nav-text">命令模式</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE"><span class="nav-number">4.</span> <span class="nav-text">网络配置</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C%E8%BF%9E%E6%8E%A5%E6%A8%A1%E5%BC%8F"><span class="nav-number">4.1.</span> <span class="nav-text">网络连接模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A1%A5%E6%8E%A5"><span class="nav-number">4.1.1.</span> <span class="nav-text">桥接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#NAT%EF%BC%88%E8%99%9A%E6%8B%9F%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2%EF%BC%89"><span class="nav-number">4.1.2.</span> <span class="nav-text">NAT（虚拟地址转换）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%85%E4%B8%BB%E6%9C%BA"><span class="nav-number">4.1.3.</span> <span class="nav-text">仅主机</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E5%99%A8vs%E4%BA%A4%E6%8D%A2%E6%9C%BA"><span class="nav-number">4.1.4.</span> <span class="nav-text">路由器vs交换机</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E6%9C%8D%E5%8A%A1%E6%8E%A7%E5%88%B6"><span class="nav-number">5.</span> <span class="nav-text">系统服务控制</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#System-V"><span class="nav-number">5.1.</span> <span class="nav-text">System V</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#systemctl"><span class="nav-number">5.2.</span> <span class="nav-text">systemctl</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="nav-number">6.</span> <span class="nav-text">常用命令</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C"><span class="nav-number">6.1.</span> <span class="nav-text">文件操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9"><span class="nav-number">6.1.1.</span> <span class="nav-text">查看文件内容</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#cat-concat-concatenate"><span class="nav-number">6.1.1.1.</span> <span class="nav-text">cat (concat)(concatenate)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#more"><span class="nav-number">6.1.1.2.</span> <span class="nav-text">more</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#less-%E5%88%86%E9%A1%B5%E6%9F%A5%E7%9C%8B"><span class="nav-number">6.1.1.3.</span> <span class="nav-text">less 分页查看</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#tail-%E5%AE%9E%E6%97%B6%E8%BE%93%E5%87%BA"><span class="nav-number">6.1.1.4.</span> <span class="nav-text">tail 实时输出</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#grep-%E8%BF%87%E6%BB%A4"><span class="nav-number">6.1.1.5.</span> <span class="nav-text">grep 过滤</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9"><span class="nav-number">6.1.2.</span> <span class="nav-text">修改文件内容</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E5%8E%8B%E7%BC%A9%E6%96%87%E4%BB%B6%EF%BC%88tar%EF%BC%89"><span class="nav-number">6.1.3.</span> <span class="nav-text">解压缩文件（tar）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%9B%AE%E5%BD%95"><span class="nav-number">6.2.</span> <span class="nav-text">目录</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86"><span class="nav-number">6.3.</span> <span class="nav-text">权限管理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#chmod"><span class="nav-number">6.3.1.</span> <span class="nav-text">chmod</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95"><span class="nav-number">6.3.1.1.</span> <span class="nav-text">基本用法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E7%89%B9%E5%AE%9A%E7%94%A8%E6%88%B7%E7%9A%84%E6%9D%83%E9%99%90"><span class="nav-number">6.3.1.2.</span> <span class="nav-text">设置特定用户的权限</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E5%85%AB%E8%BF%9B%E5%88%B6%E6%95%B0%E8%AE%BE%E7%BD%AE%E6%9D%83%E9%99%90"><span class="nav-number">6.3.1.3.</span> <span class="nav-text">使用八进制数设置权限</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%92%E5%BD%92%E4%BF%AE%E6%94%B9%E6%9D%83%E9%99%90"><span class="nav-number">6.3.1.4.</span> <span class="nav-text">递归修改权限</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%B6%E4%BB%96%E9%80%89%E9%A1%B9"><span class="nav-number">6.3.1.5.</span> <span class="nav-text">其他选项</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B"><span class="nav-number">6.3.1.6.</span> <span class="nav-text">示例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86"><span class="nav-number">6.3.2.</span> <span class="nav-text">用户管理</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E7%B3%BB%E7%BB%9F%E7%8A%B6%E6%80%81"><span class="nav-number">6.4.</span> <span class="nav-text">查看系统状态</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BC%80%E5%8F%91%E8%B0%83%E8%AF%95"><span class="nav-number">6.5.</span> <span class="nav-text">开发调试</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8C%82%E8%BD%BD%E8%AE%BE%E5%A4%87"><span class="nav-number">6.6.</span> <span class="nav-text">挂载设备</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C"><span class="nav-number">6.7.</span> <span class="nav-text">网络</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B6%E4%BB%96"><span class="nav-number">6.8.</span> <span class="nav-text">其他</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Shell%E7%BC%96%E7%A8%8B"><span class="nav-number">7.</span> <span class="nav-text">Shell编程</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85"><span class="nav-number">8.</span> <span class="nav-text">软件安装</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8"><span class="nav-number">8.1.</span> <span class="nav-text">包管理器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#RPM"><span class="nav-number">8.1.1.</span> <span class="nav-text">RPM</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#YUM"><span class="nav-number">8.1.2.</span> <span class="nav-text">YUM</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8D%A2%E6%BA%90"><span class="nav-number">8.1.2.1.</span> <span class="nav-text">换源</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#apt"><span class="nav-number">8.1.3.</span> <span class="nav-text">apt</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD%E5%B7%A5%E5%85%B7"><span class="nav-number">8.2.</span> <span class="nav-text">下载工具</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#wget"><span class="nav-number">8.2.1.</span> <span class="nav-text">wget</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#curl"><span class="nav-number">8.2.2.</span> <span class="nav-text">curl</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%84%E7%90%86%E5%A4%8D%E6%9D%82%E7%9A%84web%E8%AF%B7%E6%B1%82"><span class="nav-number">8.2.3.</span> <span class="nav-text">处理复杂的web请求</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85"><span class="nav-number">8.3.</span> <span class="nav-text">编译安装</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SSH"><span class="nav-number">9.</span> <span class="nav-text">SSH</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#SSH%E7%AB%AF%E5%8F%A3"><span class="nav-number">9.1.</span> <span class="nav-text">SSH端口</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%BB%98%E8%AE%A4%E7%AB%AF%E5%8F%A3%EF%BC%9A22"><span class="nav-number">9.1.1.</span> <span class="nav-text">默认端口：22</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%AB%AF%E5%8F%A3"><span class="nav-number">9.1.2.</span> <span class="nav-text">自定义端口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AB%AF%E5%8F%A3%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="nav-number">9.1.3.</span> <span class="nav-text">端口的作用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AB%AF%E5%8F%A3%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="nav-number">9.1.4.</span> <span class="nav-text">端口的工作原理</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8SSH%E7%99%BB%E5%BD%95%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-number">9.2.</span> <span class="nav-text">使用SSH登录远程服务器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-OpenSSH"><span class="nav-number">9.2.1.</span> <span class="nav-text">安装 OpenSSH</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8%E5%B9%B6%E5%90%AF%E7%94%A8-SSH-%E6%9C%8D%E5%8A%A1"><span class="nav-number">9.2.2.</span> <span class="nav-text">启动并启用 SSH 服务</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE-SSH%EF%BC%88%E5%8F%AF%E9%80%89%EF%BC%89"><span class="nav-number">9.2.3.</span> <span class="nav-text">配置 SSH（可选）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A1%AE%E5%AE%9A%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84-IP-%E5%9C%B0%E5%9D%80%E5%92%8C%E7%94%A8%E6%88%B7%E5%90%8D"><span class="nav-number">9.2.4.</span> <span class="nav-text">确定远程服务器的 IP 地址和用户名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-SSH-%E5%91%BD%E4%BB%A4%E8%BF%9E%E6%8E%A5%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-number">9.2.5.</span> <span class="nav-text">使用 SSH 命令连接服务器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AB%AF%E5%8F%A3%E5%8F%B7%E9%9D%9E%E9%BB%98%E8%AE%A4%E6%97%B6%E6%8C%87%E5%AE%9A%E7%AB%AF%E5%8F%A3"><span class="nav-number">9.2.6.</span> <span class="nav-text">端口号非默认时指定端口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%85%A5%E5%AF%86%E7%A0%81"><span class="nav-number">9.2.7.</span> <span class="nav-text">输入密码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-SSH-%E5%AF%86%E9%92%A5%E7%99%BB%E5%BD%95%EF%BC%88%E5%8F%AF%E9%80%89%EF%BC%89"><span class="nav-number">9.2.8.</span> <span class="nav-text">使用 SSH 密钥登录（可选）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%94%9F%E6%88%90%E5%AF%86%E9%92%A5%E5%AF%B9"><span class="nav-number">9.2.8.1.</span> <span class="nav-text">生成密钥对</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B0%86%E5%85%AC%E9%92%A5%E5%A4%8D%E5%88%B6%E5%88%B0%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-number">9.2.8.2.</span> <span class="nav-text">将公钥复制到远程服务器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E8%BF%87%E5%AF%86%E9%92%A5%E8%BF%9E%E6%8E%A5"><span class="nav-number">9.2.8.3.</span> <span class="nav-text">通过密钥连接</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Docker"><span class="nav-number">10.</span> <span class="nav-text">Docker</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E6%8C%82%E8%BD%BD-%E5%8F%8C%E5%90%91%E7%BB%91%E5%AE%9A"><span class="nav-number">10.1.</span> <span class="nav-text">数据挂载 双向绑定</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E9%95%9C%E5%83%8F-dockerfile"><span class="nav-number">10.2.</span> <span class="nav-text">自定义镜像-dockerfile</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%B9%E5%99%A8%E9%97%B4%E7%BD%91%E7%BB%9C%E4%BA%92%E8%BF%9E"><span class="nav-number">10.3.</span> <span class="nav-text">容器间网络互连</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2"><span class="nav-number">10.4.</span> <span class="nav-text">项目部署</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#dockerCompose"><span class="nav-number">10.5.</span> <span class="nav-text">dockerCompose</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MySQL-on-WSL"><span class="nav-number">11.</span> <span class="nav-text">MySQL on WSL</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#CentOS-7-%E5%AE%89%E8%A3%85%E5%88%B0-WSL2"><span class="nav-number">11.1.</span> <span class="nav-text">CentOS 7 安装到 WSL2</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%9C%A8%E6%AD%A4%E5%A4%84%E6%89%93%E5%BC%80PowerShell"><span class="nav-number">12.</span> <span class="nav-text">在此处打开PowerShell</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%88%90%E5%8A%9F%E8%BF%94%E5%9B%9E%E5%A6%82%E4%B8%8B"><span class="nav-number">13.</span> <span class="nav-text">成功返回如下</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E7%BC%BA%E4%B9%8F%E7%9A%84%E4%BE%9D%E8%B5%96%E9%A1%B9"><span class="nav-number">13.1.</span> <span class="nav-text">安装缺乏的依赖项</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E6%89%A7%E8%A1%8Csystemctl%E5%91%BD%E4%BB%A4%E6%8A%A5%E9%94%99%EF%BC%9AFailed-to-get-D-Bus-connection"><span class="nav-number">13.2.</span> <span class="nav-text">解决执行systemctl命令报错：Failed to get D-Bus connection </span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL"><span class="nav-number">13.3.</span> <span class="nav-text">MySQL</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E9%9A%8F%E6%9C%BA%E7%94%9F%E6%88%90%E5%AF%86%E7%A0%81"><span class="nav-number">13.3.1.</span> <span class="nav-text">查看随机生成密码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9B%B4%E6%94%B9%E5%AF%86%E7%A0%81"><span class="nav-number">13.3.2.</span> <span class="nav-text">更改密码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9B%B4%E6%94%B9%E5%AF%86%E7%A0%81%E7%AD%96%E7%95%A5"><span class="nav-number">13.3.3.</span> <span class="nav-text">更改密码策略</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84"><span class="nav-number">13.3.4.</span> <span class="nav-text">配置文件路径</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E5%8F%AF%E4%BE%9B%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AE%E7%9A%84%E7%94%A8%E6%88%B7"><span class="nav-number">13.3.5.</span> <span class="nav-text">添加可供远程访问的用户</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8BWSL%E7%9A%84IP%E5%9C%B0%E5%9D%80"><span class="nav-number">13.4.</span> <span class="nav-text">查看WSL的IP地址</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E6%9C%8D%E5%8A%A1%E7%8A%B6%E6%80%81"><span class="nav-number">13.5.</span> <span class="nav-text">查看服务状态</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Nginx"><span class="nav-number">14.</span> <span class="nav-text">Nginx</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#nginx-conf"><span class="nav-number">14.1.</span> <span class="nav-text">nginx.conf</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="碎梦"
      src="https://avatars.githubusercontent.com/u/62317679?s=400&v=4">
  <p class="site-author-name" itemprop="name">碎梦</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">76</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">17</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">123</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://scatteredream.github.io/2024/11/30/408-OS-Linux/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars.githubusercontent.com/u/62317679?s=400&v=4">
      <meta itemprop="name" content="碎梦">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="scatteredream's blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Linux 基本命令 | scatteredream's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Linux 基本命令
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-11-30 00:00:00" itemprop="dateCreated datePublished" datetime="2024-11-30T00:00:00+08:00">2024-11-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-05-05 11:37:38" itemprop="dateModified" datetime="2025-05-05T11:37:38+08:00">2025-05-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/OS/" itemprop="url" rel="index"><span itemprop="name">OS</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h1 id="Linux-概述"><a href="#Linux-概述" class="headerlink" title="Linux 概述"></a>Linux 概述</h1><h2 id="Unix家族"><a href="#Unix家族" class="headerlink" title="Unix家族"></a>Unix家族</h2><p>在unix编写过程中发明出了新的编程语言: C</p>
<p><img src="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241007165031608.png" alt="image-20241007165031608"></p>
<h2 id="GNU-自由软件运动"><a href="#GNU-自由软件运动" class="headerlink" title="GNU: 自由软件运动"></a>GNU: 自由软件运动</h2><p>FreeBSD: 允许闭源</p>
<p>GPL: GNU General Public License 不允许闭源</p>
<p>MIT: 声明MIT即可</p>
<p><img src="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241007170423889.png" alt="image-20241007170423889"></p>
<h2 id="Linux-发行版"><a href="#Linux-发行版" class="headerlink" title="Linux 发行版"></a>Linux 发行版</h2><p><img src="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241007171216031.png" alt="image-20241007171216031"></p>
<h2 id="Linux-vs-Windows"><a href="#Linux-vs-Windows" class="headerlink" title="Linux vs. Windows"></a>Linux vs. Windows</h2><p><img src="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241007171911495.png" alt="image-20241007171911495"></p>
<h1 id="文件系统"><a href="#文件系统" class="headerlink" title="文件系统"></a>文件系统</h1><p>Linux用正斜杠表示路径，一切皆文件</p>
<p><img src="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241007174437116.png" alt="image-20241007174437116"></p>
<p>虚拟目录，只是逻辑上的关系，分区和挂载点才会决定物理存放位置的关系</p>
<ul>
<li><strong>/bin /sbin</strong> 存放二进制命令的目录，这里是一个快捷方式，实际上是/usr/bin</li>
<li>/lib /lib64 存放动态链接库，这里是一个快捷方式，实际上是/usr/lib</li>
<li>/media /mnt 外部设备挂载目录</li>
<li>/home /root用户文件夹</li>
<li>/boot 启动相关</li>
<li>/dev 设备相关 </li>
<li>/run /proc 进程</li>
<li>/srv 服务</li>
<li>/sys 系统硬件</li>
<li><strong>/var</strong> 可变目录 log 日志文件</li>
<li>/opt </li>
<li>/tmp 临时文件</li>
<li><strong>/etc</strong> 配置文件</li>
</ul>
<h1 id="Vim"><a href="#Vim" class="headerlink" title="Vim"></a>Vim</h1><p>vi-&gt;vim </p>
<p><img src="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241007182423055.png" alt="image-20241007182423055"></p>
<h2 id="一般模式"><a href="#一般模式" class="headerlink" title="一般模式"></a>一般模式</h2><p><strong>光标操作</strong>：</p>
<ul>
<li>e 移动到当前词尾</li>
<li>b 上一个词的词头  shift+方向左</li>
<li>w 下一个词的词头 shift+方向右</li>
<li>gg 当前文档的开头 shift+h </li>
<li>3 gg 跳转到第3行</li>
<li>shift+g 跳转到最后一行</li>
<li>$ 定位到行尾</li>
<li>^ 定位到行开头</li>
</ul>
<p><strong>复制粘贴整行</strong>：</p>
<ul>
<li>[3] yy 复制从光标开始的3行内容</li>
<li>[3] p 粘贴剪贴板的内容3次</li>
<li>y + w  复制当前单词</li>
<li>y + $ 复制从光标到行尾($可以定位到行尾)</li>
<li>y + ^ 复制从行开头到光标（^可以定位到行尾） 记忆：正则表达式^ $</li>
</ul>
<p><strong>删除行</strong>：</p>
<ul>
<li>[3] dd 删除光标开始的3行</li>
<li>d + w 删除单词，（要把光标移到单词开头）</li>
<li>d + $ 删除从光标到行尾</li>
<li>d + ^ 删除从行开头到光标</li>
</ul>
<p><strong>撤销操作</strong>：u</p>
<p><strong>剪切字符</strong>：</p>
<ul>
<li>x 剪切 光标所指字符</li>
<li>shift + x  剪切光标之前的字符，类似退格</li>
</ul>
<p><strong>替换</strong>：</p>
<ul>
<li>r 替换 光标所指字符 </li>
<li>shift + r 进入替换模式 类似insert模式 输入的字符将直接覆盖光标处的内容</li>
</ul>
<p><strong>显示行号</strong>：</p>
<ul>
<li><code>:set nu</code></li>
</ul>
<h2 id="编辑模式"><a href="#编辑模式" class="headerlink" title="编辑模式"></a>编辑模式</h2><p><code>i </code>光标在当前字符上 （在当前字符前面插入内容）shift+i 当前行头</p>
<p><code>a </code>光标在下一个字符上（在当前字符后面插入内容）shift+a 当前行尾</p>
<p><code>o </code>光标移动到新建的下一行 shift+o 移动到新建的上一行</p>
<h2 id="命令模式"><a href="#命令模式" class="headerlink" title="命令模式"></a>命令模式</h2><p><strong>:w 保存 :q退出 :q! 强制退出</strong></p>
<p><strong>:wq保存退出</strong> </p>
<p>:wq!强制保存退出（只读文件）</p>
<p>:set nonu 取消行号</p>
<p><strong>/boot</strong> 查找boot并高亮 n下一个 shift+n上一个</p>
<p>:s/old/new(/g) 把当前行的第一个old替换为new（加上/g为当前行所有）</p>
<p><strong>:%s/old/new(/g)</strong> 每一行的第一个old换成new（加上/g为所有行）</p>
<h1 id="网络配置"><a href="#网络配置" class="headerlink" title="网络配置"></a>网络配置</h1><p>ifconfig linux中的ipconfig</p>
<p>ping</p>
<p><strong>traceroute</strong>：追踪网络路径</p>
<h2 id="网络连接模式"><a href="#网络连接模式" class="headerlink" title="网络连接模式"></a>网络连接模式</h2><h3 id="桥接"><a href="#桥接" class="headerlink" title="桥接"></a>桥接</h3><p><img src="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241007200741497.png" alt="image-20241007200741497"></p>
<p>路由器到PC，PC这边搭一个虚拟网桥到虚拟交换机，交换机连接虚拟机网络，好处：虚拟机跟PC地位相同，坏处：隐私安全无法保证，VM占用路由器的子网地址</p>
<p>VM和PC的子网掩码相同</p>
<h3 id="NAT（虚拟地址转换）"><a href="#NAT（虚拟地址转换）" class="headerlink" title="NAT（虚拟地址转换）"></a>NAT（虚拟地址转换）</h3><p>VMware建立虚拟路由，构建了一个VM专用的子网。</p>
<p>虚拟路由（虚拟NAT服务器和DHCP服务器）分配子网IP，子网设备（虚拟机）只有通过这个虚拟路由才能连到外网。VM和PC不在一个子网中。VM要请求外网，虚拟路由会根据端口号和子网IP分配端口并更新到映射表中，把信息传到PC网卡，重复上述步骤，实现VM对外网的请求。</p>
<p>虚拟路由通过PC网卡跟外界通信，PC网卡此时只是一个中介，PC本身不算在内网中，不能跟VM通信，虚拟路由不能从外部向内部发送请求，因为NAT只能将子网IP转成外部IP，这里VMware的解决方案是虚拟出一个网络适配器（VMnet8），将PC本身也接入VM子网中。</p>
<p><img src="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241007215205758.png" alt="image-20241007215205758"></p>
<p><img src="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241007220244669.png" alt="image-20241007220244669"><img src="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241007220336304.png" alt="image-20241007220336304"></p>
<p>如图网关/路由器是168.111.2，VMnet8（给PC虚拟出的网卡）是168.111.1</p>
<h3 id="仅主机"><a href="#仅主机" class="headerlink" title="仅主机"></a>仅主机</h3><p>NAT把路由器换成交换机，主机和VM都连到这个交换机上，组成一个局域网，VM只能与主机通信。虚拟出一张主机的网卡，连到交换机上</p>
<h3 id="路由器vs交换机"><a href="#路由器vs交换机" class="headerlink" title="路由器vs交换机"></a>路由器vs交换机</h3><table>
<thead>
<tr>
<th></th>
<th>路由器</th>
<th>交换机</th>
</tr>
</thead>
<tbody><tr>
<td>动态分配IP和端口</td>
<td>支持</td>
<td>不支持</td>
</tr>
<tr>
<td>NAT</td>
<td>支持</td>
<td>不支持</td>
</tr>
<tr>
<td>转发数据</td>
<td>基于IP地址</td>
<td>基于MAC地址</td>
</tr>
<tr>
<td>适用场景</td>
<td>WAN、LAN</td>
<td>LAN（只能用于内部通信）</td>
</tr>
</tbody></table>
<p>systemd    守护进程</p>
<h1 id="系统服务控制"><a href="#系统服务控制" class="headerlink" title="系统服务控制"></a>系统服务控制</h1><h2 id="System-V"><a href="#System-V" class="headerlink" title="System V"></a>System V</h2><p>守护进程 init 第一个进程 调用init.d的脚本根据运行级别启动服务</p>
<p>开机 bios /boot init进程 运行级别 运行级别对应的服务</p>
<p><img src="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241008174512092.png" alt="image-20241008174512092"><img src="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241008174709567.png" alt="image-20241008174709567"></p>
<p>target运行服务的集合</p>
<p>systemd: 很多守护进程 相比于init效率更高</p>
<h2 id="systemctl"><a href="#systemctl" class="headerlink" title="systemctl"></a>systemctl</h2><p>控制systemd</p>
<p><code>status</code> 服务状态</p>
<p><code>restart start stop</code> 开启停止重启</p>
<p><code>enable/disable</code> 自启动</p>
<p><img src="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241007004917995-1728748475007-17.png" alt="image-20241007004917995"></p>
<p><strong>systemctl</strong>是<strong>systemd</strong>的主命令，用于管理系统。除此之外，还有<strong>hostnamectl</strong>(查看当前主机信息)、<strong>timedatectl</strong>(查看当前时区设置)、<strong>loginctl</strong>(查看当前登录的用户)等命令。</p>
<h1 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h1><p>Bash Bourne Again Shell 解释器</p>
<p>Debian dash</p>
<h2 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h2><p><code>stat filename</code>: 查看inode信息</p>
<p><strong>存储文件元信息的区域就叫 inode</strong>，译为索引节点：<strong>i（index）+node</strong>。 <strong>每个文件都有一个唯一的 inode，存储文件的元信息。</strong> 同一块不能存两个文件</p>
<p><code>ln -s file.txt file_link</code> 创建软链接</p>
<p>硬链接：inode相同 软连接：inode不同，跨文件系统，只是路径相同</p>
<p><code>touch a.txt</code> 更新文件的访问修改时间戳，<strong>如果没有则创建</strong> 所以就是创建文件</p>
<h3 id="查看文件内容"><a href="#查看文件内容" class="headerlink" title="查看文件内容"></a>查看文件内容</h3><p>wc wordcount</p>
<p>Print newline, word, and byte counts for each FILE,</p>
<h4 id="cat-concat-concatenate"><a href="#cat-concat-concatenate" class="headerlink" title="cat (concat)(concatenate)"></a><strong>cat</strong> (concat)(concatenate)</h4><ul>
<li><strong>功能</strong>：用于连接和显示文件的内容。</li>
<li><strong>用法</strong>：可以一次性显示整个文件内容，也可以将多个文件合并。</li>
<li><strong>示例</strong>：<code>cat filename.txt</code></li>
<li><strong>特点</strong>：直接将文件内容输出到终端，不支持分页或滚动。</li>
</ul>
<h4 id="more"><a href="#more" class="headerlink" title="more"></a><strong>more</strong></h4><ul>
<li><strong>功能</strong>：用于分页显示文件内容。</li>
<li><strong>用法</strong>：按空格键查看下一页，按回车键查看下一行，按 <code>q</code> 退出。</li>
<li><strong>示例</strong>：<code>more filename.txt</code></li>
<li><strong>特点</strong>：只能向前翻页，不能向后翻。</li>
</ul>
<h4 id="less-分页查看"><a href="#less-分页查看" class="headerlink" title="less 分页查看"></a><strong>less</strong> 分页查看</h4><ul>
<li><strong>功能</strong>：也是用于分页显示文件内容，功能比 <code>more</code> 强大。</li>
<li><strong>用法</strong>：支持向前和向后翻页，使用方向键、空格键、回车键等进行导航，按 <code>q</code> 退出。</li>
<li><strong>示例</strong>：<code>less filename.txt</code></li>
<li><strong>特点</strong>：可以在文件中快速查找，支持多种命令（例如 <code>/</code> 用于搜索）。</li>
</ul>
<h4 id="tail-实时输出"><a href="#tail-实时输出" class="headerlink" title="tail 实时输出"></a><strong>tail</strong> 实时输出</h4><ul>
<li><strong>功能</strong>：用于查看文件的最后几行内容。</li>
<li><strong>用法</strong>：默认显示最后 10 行，可以使用 <code>-n</code> 选项指定行数，也可以使用 <code>-f</code> 选项实时跟踪文件变化（如日志文件）。</li>
<li><strong>示例</strong>：<code>tail filename.txt</code> 或 <code>tail -f filename.txt</code></li>
<li><strong>特点</strong>：常用于监控日志文件的实时输出。</li>
</ul>
<h4 id="grep-过滤"><a href="#grep-过滤" class="headerlink" title="grep 过滤"></a><strong>grep</strong> 过滤</h4><p>g/re/p（globally search a regular expression and print，以正则表达式进行全局查找以及打印</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">grep -i apple fruitlist.txt</span><br><span class="line"><span class="comment"># 在fruitlist.txt中寻找apple字符串 忽略大小写 返回出现该字符串的行内容</span></span><br></pre></td></tr></table></figure>

<p>Windows平台下，<code>findstr</code>代替了<code>grep</code></p>
<h3 id="修改文件内容"><a href="#修改文件内容" class="headerlink" title="修改文件内容"></a>修改文件内容</h3><p><code>vim / nano</code>编辑器编辑</p>
<p><code>awk / sed</code> 批量处理（流）</p>
<p><code>echo / cat</code> 快速修改</p>
<ul>
<li><code>echo &quot;New content&quot; &gt; filename</code> 覆盖内容</li>
<li><code>echo &quot;New content&quot; &gt;&gt; filename</code> 追加内容</li>
<li><code>cat &gt; filename</code> 自行输入内容，输完ctrl+D </li>
</ul>
<h3 id="解压缩文件（tar）"><a href="#解压缩文件（tar）" class="headerlink" title="解压缩文件（tar）"></a>解压缩文件（tar）</h3><p>解压：tar -xvf</p>
<p>压缩：tar -zcvf</p>
<p>比如：假如 test 目录下有三个文件分别是：<code>aaa.txt</code>、 <code>bbb.txt</code>、<code>ccc.txt</code>，如果我们要打包 <code>test</code> 目录并指定压缩后的压缩包名称为 <code>test.tar.gz</code> 可以使用命令：<code>tar -zcvf test.tar.gz aaa.txt bbb.txt ccc.txt</code> 或 <code>tar -zcvf test.tar.gz /test/</code></p>
<h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><p><strong>cd</strong>: change directory</p>
<p><strong>mkdir</strong>/<strong>rmdir</strong>: make/remove directory(not null)</p>
<p><strong>ls</strong>: list</p>
<ul>
<li>-a: 显示.开头的隐藏文件 </li>
<li>-l: 显示长文件信息 </li>
<li>-F: 显示可执行信息</li>
</ul>
<p><strong>pwd</strong>: print work directory</p>
<p><strong>cp</strong>: copy</p>
<p><strong>rm</strong>: remove </p>
<p><strong>mv</strong>: move 可以用来改变文件名</p>
<p>find<code>/home</code>目录下查找以 <code>.txt</code> 结尾的文件名:<code>find /home -name &quot;*.txt&quot;</code> ,忽略大小写: `find /home -i name “*.txt” </p>
<h2 id="权限管理"><a href="#权限管理" class="headerlink" title="权限管理"></a>权限管理</h2><p>change owner /change mode</p>
<p><code>_rwxrw_r_</code>  普通文件</p>
<p>**所有者(u)**：一般为文件的创建者，谁创建了该文件，就天然的成为该文件的所有者，用 <code>ls ‐ahl</code> 命令可以看到文件的所有者 也可以使用 <code>chown 用户名</code> 文件名来修改文件的所有者 。</p>
<p>**文件所在组(g)**：当某个用户创建了一个文件后，这个文件的所在组就是该用户所在的组用 <code>ls ‐ahl</code>命令可以看到文件的所有组也可以使用 chgrp 组名 文件名来修改文件所在的组。</p>
<p>**其它组(o)**：除开文件的所有者和所在组的用户外，系统的其它用户都是文件的其它组。</p>
<h3 id="chmod"><a href="#chmod" class="headerlink" title="chmod"></a>chmod</h3><p>前提：你是文件所有者   **超级用户可以无视普通用户的权限 ** 普通用户可以用 <code>sudo chmod</code></p>
<p>文件： <code>r</code>可用cat读  <code>w</code>修改 <code>x</code>可执行</p>
<p>目录：<code>r</code> 可用ls命令 <code>w</code> 可新建，删除目录下文件 <code>x</code> 可以用cd访问</p>
<h4 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h4><ul>
<li><p><strong>添加权限</strong></p>
<ul>
<li><code>chmod +x filename</code>：给文件添加执行权限。</li>
<li><code>chmod +r filename</code>：给文件添加读取权限。</li>
<li><code>chmod +w filename</code>：给文件添加写入权限。</li>
</ul>
</li>
<li><p><strong>删除权限</strong></p>
<ul>
<li><code>chmod -x filename</code>：去掉文件的执行权限。</li>
<li><code>chmod -r filename</code>：去掉文件的读取权限。</li>
<li><code>chmod -w filename</code>：去掉文件的写入权限。</li>
</ul>
</li>
</ul>
<h4 id="设置特定用户的权限"><a href="#设置特定用户的权限" class="headerlink" title="设置特定用户的权限"></a>设置特定用户的权限</h4><ul>
<li><strong>针对特定用户</strong><ul>
<li><code>chmod u+x filename</code>：给文件的所有者（user）添加执行权限。</li>
<li><code>chmod g+w filename</code>：给文件的所属组（group）添加写入权限。</li>
<li><code>chmod o-r filename</code>：去掉其他用户（others）的读取权限。</li>
</ul>
</li>
</ul>
<h4 id="使用八进制数设置权限"><a href="#使用八进制数设置权限" class="headerlink" title="使用八进制数设置权限"></a>使用八进制数设置权限</h4><p>权限可以用数字表示，常见的数字对应如下：</p>
<ul>
<li><code>4</code>：读取权限（r）</li>
<li><code>2</code>：写入权限（w）</li>
<li><code>1</code>：执行权限（x）</li>
</ul>
<p>通过加和可以设置权限：</p>
<ul>
<li><code>chmod 7filename</code>：所有者有读、写、执行权限，组用户和其他用户有读、执行权限。</li>
<li><code>chmod 6filename</code>：所有者有读、写权限，组用户和其他用户有读取权限。</li>
</ul>
<h4 id="递归修改权限"><a href="#递归修改权限" class="headerlink" title="递归修改权限"></a>递归修改权限</h4><ul>
<li><strong>递归应用权限</strong>：<ul>
<li><code>chmod -R 7directory</code>：递归地给目录及其所有子文件和子目录设置权限。</li>
</ul>
</li>
</ul>
<h4 id="其他选项"><a href="#其他选项" class="headerlink" title="其他选项"></a>其他选项</h4><ul>
<li><strong>查看当前权限</strong>：<ul>
<li>使用 <code>ls -l filename</code> 命令可以查看文件的当前权限。</li>
</ul>
</li>
</ul>
<h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><p>假设你有一个脚本文件 <code>script.sh</code>，你希望让所有用户都能执行它：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> a+x script.sh</span><br></pre></td></tr></table></figure>

<p>如果你想让所有者有读、写、执行权限，而其他用户只有读权限，可以使用：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 7script.sh</span><br></pre></td></tr></table></figure>

<p>这些是 <code>chmod</code> 命令的一些常用选项和用法，希望对你有帮助！如果你有具体的权限需求，也可以告诉我，我可以提供更详细的命令。</p>
<h3 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h3><p><code>useradd/del/mod</code> <code>groupadd/del/mod</code> <code>passwd</code> 认证相关 </p>
<p><code>su username</code> 切换用户 Switch user</p>
<h2 id="查看系统状态"><a href="#查看系统状态" class="headerlink" title="查看系统状态"></a>查看系统状态</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ps : process status</span></span><br><span class="line">ps -ef </span><br><span class="line">ps -aux <span class="comment">#都是查看所有进程的运行情况</span></span><br><span class="line"></span><br><span class="line">ps aux | grep redis </span><br><span class="line">pgrep redis -a <span class="comment">#都是查看包含redis的进程运行情况</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">kill</span> 5894 <span class="comment"># 杀死pid5394</span></span><br><span class="line"><span class="built_in">kill</span> -9 5894 <span class="comment"># 强制杀死 pid5894</span></span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># uptime : startup time 用于查看系统总共运行了多长时间、系统的平均负载等信息</span></span><br><span class="line"><span class="comment"># top : table of processes 用于实时查看系统的 CPU 使用率、内存使用率、进程信息等</span></span><br><span class="line"><span class="comment"># htop : 用户更加友好的top</span></span><br><span class="line"><span class="comment"># vmstat : virtual memory status 进程、内存、I/O 等系统整体运行状态</span></span><br><span class="line"><span class="comment"># pmap : 分析具体进程的使用情况</span></span><br><span class="line"><span class="comment"># free : 用于查看系统的内存使用情况，包括已用内存、可用内存、缓冲区和缓存等</span></span><br><span class="line"><span class="comment"># df : disk free  df -h 查看磁盘的使用情况(可读性高)</span></span><br><span class="line"><span class="comment"># du : disk usage 用于查看指定目录或文件的磁盘空间使用情况，可以指定不同的选项来控制输出格式和单位。</span></span><br></pre></td></tr></table></figure>

<h2 id="开发调试"><a href="#开发调试" class="headerlink" title="开发调试"></a>开发调试</h2><p>静态分析：</p>
<ul>
<li><code>objdump -d &lt;program_file_name&gt;</code>：==查看二进制文件信息==</li>
<li><code>readelf</code>：查看ELF格式文件详细信息</li>
<li><code>ldd</code>：查看动态链接库依赖关系</li>
<li><code>nm</code>：列出目标文件中的符号表</li>
<li><code>strings</code>：提取文件中的可打印字符串</li>
</ul>
<p>内存使用与性能分析：</p>
<ul>
<li><code>cat /proc/meminfo</code> ：==内存使用概括==</li>
<li><code>pmap -x pid</code> ==显示进程的内存映射情况，包括虚拟内存地址和大小。==</li>
<li><code>valgrind --tool=memcheck ./program</code> 分析内存占用，泄露情况</li>
<li><code>perf</code>：性能分析工具</li>
</ul>
<p>调试器：</p>
<ul>
<li><code>gdb</code>：==GNU调试器==</li>
<li><code>strace</code>：==跟踪系统调用==</li>
<li><code>ltrace</code>：跟踪库函数调用</li>
</ul>
<p>构建工具：</p>
<p><strong><code>make</code></strong> 是 Linux 和 Unix 系统上常用的 <strong>构建自动化工具</strong>，用于<strong>自动化编译和管理项目中的依赖关系</strong></p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义编译器和编译选项</span></span><br><span class="line">CC = gcc</span><br><span class="line">CFLAGS = -Wall -g</span><br><span class="line"></span><br><span class="line"><span class="comment"># 目标文件和依赖关系</span></span><br><span class="line"><span class="section">all: main</span></span><br><span class="line"></span><br><span class="line"><span class="section">main: main.o utils.o</span></span><br><span class="line">	<span class="variable">$(CC)</span> <span class="variable">$(CFLAGS)</span> -o main main.o utils.o</span><br><span class="line"></span><br><span class="line"><span class="section">main.o: main.c</span></span><br><span class="line">	<span class="variable">$(CC)</span> <span class="variable">$(CFLAGS)</span> -c main.c</span><br><span class="line"></span><br><span class="line"><span class="section">utils.o: utils.c</span></span><br><span class="line">	<span class="variable">$(CC)</span> <span class="variable">$(CFLAGS)</span> -c utils.c</span><br><span class="line"></span><br><span class="line"><span class="section">clean:</span></span><br><span class="line">	rm -f *.o main</span><br><span class="line"></span><br><span class="line"><span class="comment"># 目标 (Target)：构建的最终产物，例如main。</span></span><br><span class="line"><span class="comment"># 依赖 (Dependencies)：目标所依赖的文件，例如 main.o 和 utils.o。</span></span><br><span class="line"><span class="comment"># 命令 (Commands)：生成目标的命令，需要以 Tab 缩进（不能用空格）</span></span><br></pre></td></tr></table></figure>

<h2 id="挂载设备"><a href="#挂载设备" class="headerlink" title="挂载设备"></a>挂载设备</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_43800449/article/details/130447269">Linux系统连接/挂载U盘（移动硬盘）详细步骤</a> </p>
<p>1.插入U盘，执行如下指令后能看到设备则说明连接成功</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo fdisk -l #查看外接设备名称，一般为/dev/sd...，这里假设为/dev/sdc1</span><br></pre></td></tr></table></figure>

<p>2.在/mnt下创建挂载点，进行挂载</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir /mnt/mydev #创建挂载点</span><br><span class="line">sudo mount /dev/sdc1 /mnt/mydev #将/dev/sdc1挂载到mnt中的挂载点去</span><br><span class="line">sudo df -h #查看是否挂载成功</span><br></pre></td></tr></table></figure>

<p>3.此时挂载文件夹/mnt/mydev里面就是你U盘的内容了，可以随意访问</p>
<p>4.取消挂载，这一步相当于windows下的弹出U盘</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo umount /mnt/mydev #取消挂载，拔出硬盘</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="built_in">sudo</span> <span class="built_in">rmdir</span> –p /mnt/mydev  删除挂载目录（选做）</span></span><br></pre></td></tr></table></figure>

<h2 id="网络"><a href="#网络" class="headerlink" title="网络"></a>网络</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ping www.baidu.com	<span class="comment">#ICMP</span></span><br><span class="line">traceroute www.baidu.com <span class="comment"># 路由路径</span></span><br><span class="line">ifconfig / ip <span class="comment"># 查看网络信息 interface configuration</span></span><br><span class="line">netstat -aon | grep 3306 <span class="comment"># network status 过滤3306字符串 （监听3306端口状态）</span></span><br><span class="line">ss <span class="comment"># 比netstat高效</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/wade3015/article/details/90779669">Linux用netstat查看服务及监听端口详解</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_17496365/article/details/96480424">Linux网络状态工具ss命令使用详解</a> </p>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p><code>Source</code>将xx应用于当前bash命令行</p>
<p>.bashrc .bash_profile</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44439904/article/details/109505753">linux下的source命令及~/.bashrc, ~/.bash_profile详解_source bashrc-CSDN博客</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_57208584/article/details/135868555">【Linux】什么是.bashrc，以及其使用方法-CSDN博客</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/shuiche/p/9436126.html">Linux下source命令详解 - 水车 - 博客园 (cnblogs.com)</a></p>
<p><strong>快捷键：</strong> </p>
<p><code>Ctrl</code>+<code>D</code> 用于结束输入或表示没有更多数据，通常用于交互式输入的结束</p>
<p><code>Ctrl</code>+<code>C</code> 强行停止正在运行的命令或进程</p>
<p>大部分命令，当用于文件夹时加 -r</p>
<p><strong>部署软件</strong>：</p>
<p>LAMP: Linux + Apache + MySQL/MariaDB + PHP</p>
<p>LEMP/LNMP: Linux + Nginx(Engine-X) + MySQL/MariaDB + PHP</p>
<p><a target="_blank" rel="noopener" href="https://cn.linux-terminal.com/?p=607">Apache 与 Nginx：哪一种 Web 服务器最适合您？ (linux-terminal.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://cn.linux-console.net/?p=27779">使用 Docker 轻松部署 LAMP 和/或 LEMP 堆栈 (linux-console.net)</a></p>
<p><a target="_blank" rel="noopener" href="https://cn.linux-console.net/?p=1038">如何在 CentOS 7 上安装 Nginx 1.15、MariaDB 10 和 PHP 7 (linux-console.net)</a> </p>
<h1 id="Shell编程"><a href="#Shell编程" class="headerlink" title="Shell编程"></a><a target="_blank" rel="noopener" href="https://javaguide.cn/cs-basics/operating-system/shell-intro.html">Shell编程</a></h1><h1 id="软件安装"><a href="#软件安装" class="headerlink" title="软件安装"></a>软件安装</h1><p>Debian系 <strong>apt</strong></p>
<p>RedHat系 rpm,yum</p>
<h2 id="包管理器"><a href="#包管理器" class="headerlink" title="包管理器"></a>包管理器</h2><h3 id="RPM"><a href="#RPM" class="headerlink" title="RPM"></a>RPM</h3><p>Redhat Package Manager</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">rpm -qi firefox <span class="comment"># 查询firefox的安装信息 </span></span><br><span class="line">rpm -qa <span class="comment"># 查询所有</span></span><br><span class="line"></span><br><span class="line">rpm -e firefox <span class="comment"># 卸载firefox</span></span><br><span class="line">--nodeps  <span class="comment">#不检查依赖</span></span><br><span class="line"></span><br><span class="line">rpm -ivh forefox_x86_64.rpm <span class="comment"># 安装firefox，v=verbose 详细信息 h=hash 进度条</span></span><br></pre></td></tr></table></figure>

<h3 id="YUM"><a href="#YUM" class="headerlink" title="YUM"></a>YUM</h3><p>Yellow dog Updater Modified</p>
<p>基于RPM</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yum -y install firefox <span class="comment"># 安装firefox -y表示所有yesno都填y</span></span><br><span class="line">yum list <span class="comment"># list</span></span><br><span class="line">yum update </span><br><span class="line">yum check-update</span><br><span class="line">yum deplist</span><br></pre></td></tr></table></figure>

<h4 id="换源"><a href="#换源" class="headerlink" title="换源"></a>换源</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yum 提示 Could not retrieve mirrorlist</span></span><br><span class="line"><span class="comment"># 检查是否连接到网络 Ctrl+C/D停止ping</span></span><br><span class="line">ping www.baidu.com</span><br><span class="line"><span class="comment"># ping通说明是镜像源出问题</span></span><br><span class="line"><span class="comment"># 备份当前yum源</span></span><br><span class="line"><span class="built_in">mv</span> /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup</span><br><span class="line"><span class="comment"># 下载新的 CentOS-Base.repo 到/etc/yum.repos.d/</span></span><br><span class="line"><span class="comment"># 网易: http://mirrors.163.com/.help/CentOS7-Base-163.repo </span></span><br><span class="line"><span class="comment"># 阿里: http://mirrors.aliyun.com/repo/Centos-7.repo </span></span><br><span class="line">curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo</span><br><span class="line"><span class="comment"># 清除下载过的安装包, 生成缓存</span></span><br><span class="line">yum clean all</span><br><span class="line">yum makecache</span><br></pre></td></tr></table></figure>

<p>yum 会把下载的软件包和header存储在cache中(默认路径/var/cache/yum/)，而不自动删除。如果觉得占用磁盘空间，可以使用<code>yum clean</code>指令进行清除，更精确 的用法是<code>yum clean headers</code>(清除header)，<code>yum clean packages</code>(清除下载的rpm包)，<code>yum clean all</code>(全部清除)</p>
<h3 id="apt"><a href="#apt" class="headerlink" title="apt"></a>apt</h3><p>apt（Advanced Packaging Tool）是一个在 Debian 和 Ubuntu 中的 Shell 前端软件包管理器。</p>
<p>apt 命令提供了查找、安装、升级、删除某一个、一组甚至全部软件包的命令，而且命令简洁而又好记。</p>
<p>apt 命令执行需要超级管理员权限(root)。</p>
<ul>
<li><p>列出所有可更新的软件清单命令：<strong>sudo apt update</strong></p>
</li>
<li><p>升级软件包：<strong>sudo apt upgrade</strong></p>
<p>列出可更新的软件包及版本信息：<strong>apt list –upgradable</strong></p>
<p>升级软件包，升级前先删除需要更新软件包：<strong>sudo apt full-upgrade</strong></p>
</li>
<li><p>安装指定的软件命令：<strong>sudo apt install <package_name></strong></p>
<p>安装多个软件包：<strong>sudo apt install <package_1> <package_2> <package_3></strong></p>
</li>
<li><p>更新指定的软件命令：<strong>sudo apt update <package_name></strong></p>
</li>
<li><p>显示软件包具体信息,例如：版本号，安装大小，依赖关系等等：<strong>sudo apt show <package_name></strong></p>
</li>
<li><p>删除软件包命令：<strong>sudo apt remove <package_name></strong></p>
</li>
<li><p>清理不再使用的依赖和库文件: <strong>sudo apt autoremove</strong></p>
</li>
<li><p>移除软件包及配置文件: <strong>sudo apt purge <package_name></strong></p>
</li>
<li><p>查找软件包命令： <strong>sudo apt search <keyword></strong></p>
</li>
<li><p>列出所有已安装的包：<strong>apt list –installed</strong></p>
</li>
</ul>
<h2 id="下载工具"><a href="#下载工具" class="headerlink" title="下载工具"></a>下载工具</h2><h3 id="wget"><a href="#wget" class="headerlink" title="wget"></a>wget</h3><p>webget下载工具</p>
<p> <code>wget https://example.com/file.zip</code> 支持断点续传</p>
<p><code>wget -O myfile.zip http://www.example.com/testfile.zip</code> 更改文件名</p>
<p><code>wget -b http://www.example.com/testfile.zip</code> 后台下载</p>
<p><strong>递归下载</strong></p>
<ul>
<li><code>wget -r http://www.example.com/path1/path2/</code><ul>
<li><code>-r</code>：递归在下整个站点（<a target="_blank" rel="noopener" href="http://www.example.com)资源/">www.example.com）资源</a></li>
<li><code>-nd</code>：递归下载时不创建一层一层的目录，把所有的文件下载到当前目录；不指定该选项默认按照资源在站点位置创建相应目录</li>
<li><code>-np</code>：递归下载时不搜索上层目录，只在当前路径path2下进行下载；不指定该选项默认搜素整个站点</li>
<li><code>-A 后缀名</code>：指定要下载文件的后缀名，多个后缀名之间使用逗号进行分隔</li>
<li><code>-R 后缀名</code>：排除要下载文件的后缀名，多个后缀名之间使用逗号进行分隔</li>
<li><code>-L</code>：递归时不进入其它主机。不指定该选项的话，如果站点包含了外部站点的链接，这样可能会导致下载内容无限大</li>
</ul>
</li>
</ul>
<blockquote>
<p>示例，只下载path2路径下的所有pdf和png文件，不创建额外目录全都保存在当前下载目录下:<br><code>wget -r -nd -np -A pdf,png http://www.example.com/path1/path2/</code></p>
</blockquote>
<h3 id="curl"><a href="#curl" class="headerlink" title="curl"></a>curl</h3><p><strong>curl命令</strong>是一个利用URL规则在命令行下工作的文件传输工具。它支持文件的上传和下载，所以是综合传输工具，但按传统，习惯称curl为下载工具。作为一款强力工具，curl支持包括HTTP、HTTPS、ftp等众多协议，还支持POST、cookies、认证、从指定偏移处下载部分文件、用户代理字符串、限速、文件大小、进度条等特征。做网页处理流程和数据检索自动化，curl可以祝一臂之力。</p>
<p><strong>wget</strong> 是一个独立的下载程序，无需额外的资源库，它也允许你下载网页中或是 FTP 目录中的任何内容, 能享受它超凡的下载速度，简单直接。<br><strong>curl</strong> 是一个多功能工具，是libcurl这个库支持的。它可以下载网络内容，但同时它也能做更多别的事情。</p>
<p>从用途方面，wget倾向于网络文件下载；curl倾向于网络接口调试，相当于一个无图形界面的 PostMan 工具</p>
<h3 id="处理复杂的web请求"><a href="#处理复杂的web请求" class="headerlink" title="处理复杂的web请求"></a>处理复杂的web请求</h3><p><strong>1. 自动跳转</strong></p>
<ul>
<li><code>curl -L http://www.example.com</code><ul>
<li><code>-L</code>：自动跳转到重定向链接(Location)</li>
</ul>
</li>
</ul>
<p>有些链接访问时会自动跳转(响应状态码为3xx)，<code>-L</code>参数会让 HTTP 请求跟随服务器的重定向。例如：访问 “<a target="_blank" rel="noopener" href="http://a.com&quot;/">http://a.com&quot;</a> 会重定向到 “<a target="_blank" rel="noopener" href="http://b.com&quot;,使用&quot;-l&quot;选项会返回/">http://b.com&quot;，使用&quot;-L&quot;选项会返回</a> “<a target="_blank" rel="noopener" href="http://b.com&quot;/">http://b.com&quot;</a> 的响应内容</p>
<p><strong>2. 显示响应头信息</strong></p>
<ul>
<li><code>curl -i http://www.example.com</code><ul>
<li><code>-i</code>：输出包含响应头信息</li>
<li><code>-I</code>：输出仅包含响应头信息，不包含响应内容</li>
</ul>
</li>
</ul>
<p><strong>3. 显示通信过程</strong></p>
<ul>
<li><code>curl -v http://www.example.com</code><ul>
<li><code>-v</code>：显示一次http通信的整个过程，包括端口连接和http request头信息</li>
</ul>
</li>
</ul>
<p>如果还需要查看额外的通信信息，还可以使用选项 “<code>--trace 输出文件</code>“ 或者 “<code>--trace-ascii 输出文件</code>“，例如：<code>curl --trace-ascii output.txt http://www.example.com</code>，打开文件 “output.txt”可以查看结果。</p>
<p><strong>4. 指定http请求方式</strong></p>
<ul>
<li><code>curl -X 请求方式 http://www.example.com/test</code><ul>
<li><code>-X 请求方式</code>：指定http请求方式(GET|POST|DELETE|PUT等)。默认是”GET”</li>
</ul>
</li>
</ul>
<p><strong>5. 添加http请求头</strong></p>
<ul>
<li><code>curl -H &#39;kev:value&#39; http://www.example.com/test</code><ul>
<li><code>-H &#39;kev:value&#39;</code>：添加http请求头。例：<code>-H &#39;Content-Type:application/json&#39;</code></li>
</ul>
</li>
</ul>
<p>添加多个请求头，<code>-H</code> 选项重复多次即可。例如：<br><code>curl -H &#39;Accept-Language: en-US&#39; -H &#39;Secret-Message: xyzzy&#39; http://www.example.com/test</code></p>
<h2 id="编译安装"><a href="#编译安装" class="headerlink" title="编译安装"></a>编译安装</h2><p>以OpenSSL 1.1.1 的编译安装为例</p>
<blockquote>
<p>yum -y install wget</p>
</blockquote>
<p>1.安装构建 OpenSSL 所需的依赖项。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> yum -y groupinstall <span class="string">&quot;Development Tools&quot;</span></span><br></pre></td></tr></table></figure>

<p>2.下载 OpenSSL 1.1.x 的源代码，其中<strong>x</strong>替换为所需的实际版本。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://www.openssl.org/source/openssl-1.1.1t.tar.gz</span><br></pre></td></tr></table></figure>

<p>3.提取下载的文件。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar xvf openssl-1.1.1t.tar.gz</span><br></pre></td></tr></table></figure>

<p>4.导航到从文件提取创建的目录。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd openssl-1.1*/</span><br></pre></td></tr></table></figure>

<p>5.配置 OpenSSL。您可以指定</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./config --prefix=/usr/local/openssl --openssldir=/usr/local/openssl</span><br></pre></td></tr></table></figure>

<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Operating system: x86_64-whatever-linux2</span><br><span class="line">Configuring OpenSSL version 1.1.1t (0x1010114fL) for linux-x86_64</span><br><span class="line">Using os-specific seed configuration</span><br><span class="line">Creating configdata.pm</span><br><span class="line">Creating Makefile</span><br><span class="line"></span><br><span class="line">**********************************************************************</span><br><span class="line">***                                                                ***</span><br><span class="line">***   OpenSSL has been successfully configured                     ***</span><br><span class="line">***                                                                ***</span><br><span class="line">***   If you encounter a problem while building, please open an    ***</span><br><span class="line">***   issue on GitHub &lt;https://github.com/openssl/openssl/issues&gt;  ***</span><br><span class="line">***   and include the output from the following command:           ***</span><br><span class="line">***                                                                ***</span><br><span class="line">***       perl configdata.pm --dump                                ***</span><br><span class="line">***                                                                ***</span><br><span class="line">***   (If you are new to OpenSSL, you might want to consult the    ***</span><br><span class="line">***   &#x27;Troubleshooting&#x27; section in the INSTALL file first)         ***</span><br><span class="line">***                                                                ***</span><br><span class="line">**********************************************************************</span><br></pre></td></tr></table></figure>

<p>5.使用make命令构建 OpenSSL 1.1.x。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make -j $(<span class="built_in">nproc</span>)</span><br></pre></td></tr></table></figure>

<p>6.在 CentOS 7 / RHEL 7 上安装 OpenSSL 1.1.1</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo make install</span><br></pre></td></tr></table></figure>

<p>7.更新共享库缓存。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ldconfig</span><br></pre></td></tr></table></figure>

<p>8.更新系统范围的 OpenSSL 配置：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo tee /etc/profile.d/openssl.sh&lt;&lt;EOF</span><br><span class="line">export PATH=/usr/local/openssl/bin:\$PATH</span><br><span class="line">export LD_LIBRARY_PATH=/usr/local/openssl/lib:\$LD_LIBRARY_PATH</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<p>9.重新加载shell环境：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile.d/openssl.sh</span><br><span class="line">logout</span><br></pre></td></tr></table></figure>

<p>10.验证 CentOS 7 / RHEL 7 上是否安装了 OpenSSL 1.1.1</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">which</span> openssl</span></span><br><span class="line">/usr/local/openssl/bin/openssl</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">openssl version</span></span><br><span class="line">OpenSSL 1.1.1t  7 Feb 2023</span><br></pre></td></tr></table></figure>



<h1 id="SSH"><a href="#SSH" class="headerlink" title="SSH"></a>SSH</h1><h2 id="SSH端口"><a href="#SSH端口" class="headerlink" title="SSH端口"></a>SSH端口</h2><p>SSH 的端口是服务器上用于监听和处理 SSH 连接请求的网络端口。端口可以理解为设备或计算机与外界通信的一个“入口”或“通道”，每个端口对应不同的服务或应用程序。</p>
<h3 id="默认端口：22"><a href="#默认端口：22" class="headerlink" title="默认端口：22"></a>默认端口：22</h3><p>SSH 的默认端口号是 <strong>22</strong>。当你在终端中使用 SSH 连接到远程服务器时，如果没有明确指定端口，SSH 客户端会自动连接到服务器的 22 端口。</p>
<p>例如，以下命令使用默认的 22 端口：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh user@192.168.1.100</span><br></pre></td></tr></table></figure>

<h3 id="自定义端口"><a href="#自定义端口" class="headerlink" title="自定义端口"></a>自定义端口</h3><p>为了增强安全性，很多服务器管理员会修改默认的 22 端口为其他非标准端口。这样可以减少一些自动化的攻击，比如扫描网络上 22 端口的 SSH 连接尝试。</p>
<p>如果服务器的 SSH 服务配置在非标准端口（例如 2222），你需要显式指定端口号，才能成功连接到服务器：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh user@192.168.1.100 -p 2222</span><br></pre></td></tr></table></figure>

<h3 id="端口的作用"><a href="#端口的作用" class="headerlink" title="端口的作用"></a>端口的作用</h3><p>每个端口都是通过一个数字标识的，范围在 0 到 65535 之间。不同的端口对应不同的服务：</p>
<ul>
<li><strong>端口 22</strong>：通常用于 SSH 连接。</li>
<li><strong>端口 80</strong>：用于 HTTP 网络服务。</li>
<li><strong>端口 443</strong>：用于 HTTPS 网络服务。</li>
</ul>
<p>SSH 服务监听的端口可以自定义配置，通常在服务器的 <code>/etc/ssh/sshd_config</code> 文件中进行修改。更改默认端口可以提高安全性，减少针对默认端口的恶意攻击。</p>
<h3 id="端口的工作原理"><a href="#端口的工作原理" class="headerlink" title="端口的工作原理"></a>端口的工作原理</h3><p>当你尝试通过 SSH 连接到服务器时，SSH 客户端发送请求到服务器的指定端口。服务器上的 SSH 服务会在这个端口上监听并接收连接请求，一旦验证通过，就会建立安全的加密通道，允许你远程控制服务器。</p>
<p>简而言之，SSH 端口就是服务器上提供 SSH 服务的入口，你可以通过指定端口来连接远程服务器。</p>
<p>要通过 SSH 登录到远程服务器上，可以按照以下步骤进行操作：</p>
<h2 id="使用SSH登录远程服务器"><a href="#使用SSH登录远程服务器" class="headerlink" title="使用SSH登录远程服务器"></a>使用SSH登录远程服务器</h2><p>要在 CentOS 7 上使用 OpenSSH，通常分为以下几个步骤：安装、配置并启动 SSH 服务。具体步骤如下：</p>
<h3 id="安装-OpenSSH"><a href="#安装-OpenSSH" class="headerlink" title="安装 OpenSSH"></a>安装 OpenSSH</h3><p>CentOS 7 通常已经预装了 OpenSSH。如果没有安装，可以使用以下命令来安装：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> yum install -y openssh-server</span><br></pre></td></tr></table></figure>

<h3 id="启动并启用-SSH-服务"><a href="#启动并启用-SSH-服务" class="headerlink" title="启动并启用 SSH 服务"></a>启动并启用 SSH 服务</h3><p>安装完成后，你需要启动并设置 SSH 服务开机自启：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动 SSH 服务</span></span><br><span class="line"><span class="built_in">sudo</span> systemctl start sshd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置开机自动启动</span></span><br><span class="line"><span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> sshd</span><br></pre></td></tr></table></figure>

<h3 id="配置-SSH（可选）"><a href="#配置-SSH（可选）" class="headerlink" title="配置 SSH（可选）"></a>配置 SSH（可选）</h3><p>如果需要自定义配置 SSH，可以修改配置文件 <code>/etc/ssh/sshd_config</code>。你可以使用任何文本编辑器来编辑文件，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> vi /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure>

<p>常见的配置项包括：</p>
<ul>
<li><p><strong>更改默认端口</strong>：<br>找到 <code>#Port 22</code>，取消注释并设置成你想要的端口号，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Port 2222</span><br></pre></td></tr></table></figure></li>
<li><p><strong>禁止 root 账户直接登录</strong>：<br>找到 <code>#PermitRootLogin yes</code>，取消注释并改为 <code>no</code> 以提高安全性：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PermitRootLogin no</span><br></pre></td></tr></table></figure></li>
</ul>
<p>完成后，保存并退出。</p>
<h3 id="确定远程服务器的-IP-地址和用户名"><a href="#确定远程服务器的-IP-地址和用户名" class="headerlink" title="确定远程服务器的 IP 地址和用户名"></a>确定远程服务器的 IP 地址和用户名</h3><ul>
<li><strong>IP 地址</strong>：你需要知道远程服务器的公网 IP 或内网 IP。</li>
<li><strong>用户名</strong>：你要知道登录时使用的用户名。通常是服务器的账户名，例如 <code>root</code>、<code>admin</code> 或其他已创建的普通用户。</li>
</ul>
<h3 id="使用-SSH-命令连接服务器"><a href="#使用-SSH-命令连接服务器" class="headerlink" title="使用 SSH 命令连接服务器"></a>使用 SSH 命令连接服务器</h3><p>在本地终端中使用 <code>ssh</code> 命令连接远程服务器，命令格式如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh username@server_ip</span><br></pre></td></tr></table></figure>

<ul>
<li><code>username</code>：远程服务器的登录用户名。</li>
<li><code>server_ip</code>：远程服务器的 IP 地址。</li>
</ul>
<p>例如，如果你的远程服务器 IP 是 <code>192.168.1.100</code>，用户名是 <code>user123</code>，你可以输入以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh user123@192.168.1.100</span><br></pre></td></tr></table></figure>

<h3 id="端口号非默认时指定端口"><a href="#端口号非默认时指定端口" class="headerlink" title="端口号非默认时指定端口"></a>端口号非默认时指定端口</h3><p>如果 SSH 服务使用了非默认端口（默认是 22），你需要通过 <code>-p</code> 参数指定端口号。例如，如果远程服务器的 SSH 端口是 2222，你可以这样连接：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh user123@192.168.1.100 -p 2222</span><br></pre></td></tr></table></figure>

<h3 id="输入密码"><a href="#输入密码" class="headerlink" title="输入密码"></a>输入密码</h3><p>第一次连接时，系统会提示你是否信任服务器的主机密钥，输入 <code>yes</code>，然后系统会要求你输入服务器用户的密码。输入密码并回车后，如果验证成功，你将进入远程服务器。</p>
<h3 id="使用-SSH-密钥登录（可选）"><a href="#使用-SSH-密钥登录（可选）" class="headerlink" title="使用 SSH 密钥登录（可选）"></a>使用 SSH 密钥登录（可选）</h3><p>如果你不想每次输入密码，可以配置 SSH 密钥对（公钥和私钥）进行无密码登录。步骤如下：</p>
<h4 id="生成密钥对"><a href="#生成密钥对" class="headerlink" title="生成密钥对"></a>生成密钥对</h4><p>在本地电脑上生成 SSH 密钥对：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -b 4096</span><br></pre></td></tr></table></figure>

<p>按回车后会提示你设置密钥保存路径和密码。默认保存在 <code>~/.ssh/id_rsa</code>。设置密码是可选的。</p>
<h4 id="将公钥复制到远程服务器"><a href="#将公钥复制到远程服务器" class="headerlink" title="将公钥复制到远程服务器"></a>将公钥复制到远程服务器</h4><p>使用 <code>ssh-copy-id</code> 命令将你的公钥复制到远程服务器：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-copy-id user123@192.168.1.100</span><br></pre></td></tr></table></figure>

<p>或者，如果服务器使用了不同端口：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-copy-id -p 2222 user123@192.168.1.100</span><br></pre></td></tr></table></figure>

<h4 id="通过密钥连接"><a href="#通过密钥连接" class="headerlink" title="通过密钥连接"></a>通过密钥连接</h4><p>公钥成功上传后，下一次你再使用 SSH 登录时，就无需输入密码了：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh user123@192.168.1.100</span><br></pre></td></tr></table></figure>

<p>通过以上步骤，你就可以通过 SSH 成功登录远程服务器了。如果有问题，可以检查防火墙、SSH 服务是否正常运行等配置。</p>
<p><strong>47.97.75.20(公)</strong></p>
<h1 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h1><h2 id="数据挂载-双向绑定"><a href="#数据挂载-双向绑定" class="headerlink" title="数据挂载 双向绑定"></a>数据挂载 双向绑定</h2><p><strong>数据卷挂载</strong></p>
<p><strong>docker volume</strong> </p>
<p>nginx 容器内部挂载</p>
<p>docker run -v html:/usr/share/nginx/html</p>
<p>容器和外界完全隔绝无法直接访问，内部的bash也不完整不能使用vi编辑器，所以可以把容器内部html目录挂载到宿主机上，挂载之后就有了</p>
<p><strong>本地目录挂载</strong></p>
<p>本地任意目录</p>
<p>docker run -v 本地目录：容器内部目录，必须以/ ./开头</p>
<h2 id="自定义镜像-dockerfile"><a href="#自定义镜像-dockerfile" class="headerlink" title="自定义镜像-dockerfile"></a>自定义镜像-dockerfile</h2><p> Java镜像：Linux运行环境，JRE, 环境变量，拷贝jar，编写运行的shell脚本</p>
<p><img src="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241010090300035-1728747968346-1.png" alt="image-20241010090300035"></p>
<p>ubuntu镜像中必要的部分，分层使得轮子的复用性大大提高BaseImage，也能提高下载的效率，减少网络资源和硬盘空间的占用</p>
<p><img src="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241010090221898-1728747968346-2.png" alt="image-20241010090221898"></p>
<p><img src="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241010090640183-1728747968346-3.png" alt="image-20241010090640183"></p>
<p><img src="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241010091128239-1728747968347-7.png" alt="image-20241010091128239"></p>
<h2 id="容器间网络互连"><a href="#容器间网络互连" class="headerlink" title="容器间网络互连"></a>容器间网络互连</h2><p><img src="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241010095017952-1728747968346-6.png" alt="image-20241010095017952"></p>
<p>Bridged network</p>
<p>新创建网桥，将指定容器连接到网桥</p>
<p>创建容器时指定network，即可连到网桥</p>
<p>同一个自定义网桥的容器之间可以用容器名直接通信     </p>
<p><img src="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241010095906439-1728747968346-4.png" alt="image-20241010095906439"></p>
<h2 id="项目部署"><a href="#项目部署" class="headerlink" title="项目部署"></a>项目部署</h2><p>Springboot + Nginx + Vue </p>
<p>1.springboot内部封装了servlet容器 tomcat 能够处理对动态资源的请求（后端集成）</p>
<ul>
<li>管理Servlet程序的生命周期</li>
<li>将URL映射到指定的Servlet进行处理</li>
<li>与Servlet程序合作处理HTTP请求——根据HTTP请求生成HttpServletResponse对象并传递给Servlet进行处理，将Servlet中的HttpServletResponse对象生成的内容返回给浏览器</li>
</ul>
<p>2.nginx能够进行反向代理，代理后端服务器处理静态资源的请求（例如图片、视频、CSS、JavaScript文件等,也就是前端的），负载均衡：当业务压力增大时，可能一个Tomcat的实例不足以处理，那么这时可以启动多个Tomcat实例进行水平扩展，而Nginx的负载均衡功能可以把请求通过算法分发到各个不同的实例进行处理</p>
<p><img src="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241010154836707-1728747968346-5.png" alt="image-20241010154836707"></p>
<p><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/32212996">tomcat 与 nginx，apache的区别是什么？ - 知乎 (zhihu.com)</a></p>
<p>HTTP server：只关心http协议层面的传输和访问控制，如实将服务器上的文件通过http协议传输给客户端。</p>
<p>Application server: 应用容器（servlet=server applet）tomcat需要提供JSP/servlet运行的类库，会集成一部分httpserver功能，但是不如HTTP server强大</p>
<h2 id="dockerCompose"><a href="#dockerCompose" class="headerlink" title="dockerCompose"></a>dockerCompose</h2><p>docker-compose.yml</p>
<p><img src="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241010165557595-1728747968347-8.png" alt="image-20241010165557595"></p>
<h1 id="MySQL-on-WSL"><a href="#MySQL-on-WSL" class="headerlink" title="MySQL on WSL"></a>MySQL on WSL</h1><h2 id="CentOS-7-安装到-WSL2"><a href="#CentOS-7-安装到-WSL2" class="headerlink" title="CentOS 7 安装到 WSL2"></a>CentOS 7 安装到 WSL2</h2><ol>
<li><p>下载CentOS: <a target="_blank" rel="noopener" href="https://github.com/mishamosher/CentOS-WSL/releases/tag/7.9-2211">Release CentOS 7.9-2211 · mishamosher/CentOS-WSL (github.com)</a></p>
</li>
<li><p>下载完成解压得到 CentOS7.exe rootfs.tar.gz 两个文件</p>
</li>
<li><p>安装完成后在相同目录下生成 ext4.vhdx 文件</p>
</li>
<li><p>```powershell</p>
<h1 id="在此处打开PowerShell"><a href="#在此处打开PowerShell" class="headerlink" title="在此处打开PowerShell"></a>在此处打开PowerShell</h1><p>wsl -l -v</p>
<h1 id="成功返回如下"><a href="#成功返回如下" class="headerlink" title="成功返回如下"></a>成功返回如下</h1><p>NAME    STATE   VERSION<br>CentOS7 Stopped 2</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">5. ```powershell</span><br><span class="line">   # 迁移默认存储位置</span><br><span class="line">   # 确保为stop状态</span><br><span class="line">   wsl -l -v</span><br><span class="line">   # 导出CentOS文件到tar，文件夹需提前创建</span><br><span class="line">   wsl --export CentOS7 D:/CentOSWSL/centos7.tar</span><br><span class="line">   # 注销系统</span><br><span class="line">   wsl --unregister CentOS7</span><br><span class="line">   # 确定已注销</span><br><span class="line">   wsl -l -v</span><br><span class="line">   # 执行导入(如果失败可再次尝试执行)</span><br><span class="line">   wsl --import CentOS7  D:/CentOSWSL/ D:/CentOSWSL/centos7.tar</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="安装缺乏的依赖项"><a href="#安装缺乏的依赖项" class="headerlink" title="安装缺乏的依赖项"></a>安装缺乏的依赖项</h2><p>有些部分会提示缺乏dependencies</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh mysql-community-devel-8.0.17-1.el7.x86_64.rpm --force --nodeps</span><br><span class="line"><span class="comment"># 直接强制安装，无视依赖</span></span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install libaio</span><br><span class="line">yum install openssl-devel</span><br></pre></td></tr></table></figure>

<h2 id="解决执行systemctl命令报错：Failed-to-get-D-Bus-connection"><a href="#解决执行systemctl命令报错：Failed-to-get-D-Bus-connection" class="headerlink" title="解决执行systemctl命令报错：Failed to get D-Bus connection "></a><a target="_blank" rel="noopener" href="https://www.cnblogs.com/fengjq/p/17616874.html">解决执行systemctl命令报错：Failed to get D-Bus connection </a></h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;[boot]\nsystemd=true&quot;</span> | <span class="built_in">sudo</span> <span class="built_in">tee</span> -a /etc/wsl.conf</span><br><span class="line"><span class="comment"># powershell</span></span><br><span class="line">wsl.exe --shutdown</span><br><span class="line"><span class="comment"># 验证</span></span><br><span class="line">systemctl list-unit-files --<span class="built_in">type</span>=service</span><br></pre></td></tr></table></figure>

<h2 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">systemctl start mysqld</span><br><span class="line">systemctl restart mysqld</span><br><span class="line">systemctl stop mysqld</span><br><span class="line"></span><br><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure>

<h3 id="查看随机生成密码"><a href="#查看随机生成密码" class="headerlink" title="查看随机生成密码"></a>查看随机生成密码</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /var/log/mysqld.log</span><br></pre></td></tr></table></figure>

<h3 id="更改密码"><a href="#更改密码" class="headerlink" title="更改密码"></a>更改密码</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">user</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> identified <span class="keyword">by</span> <span class="string">&#x27;ace123456&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="更改密码策略"><a href="#更改密码策略" class="headerlink" title="更改密码策略"></a>更改密码策略</h3><p><strong>默认策略：</strong></p>
<ul>
<li><strong>至少包含 1 位大小写</strong></li>
<li><strong>至少包含 1 位数字</strong></li>
<li><strong>包含 1 个特殊符号</strong></li>
<li><strong>必须 8 位及以上</strong></li>
</ul>
<p><strong>连接到MySQL服务器：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure>

<p>输入 <code>root</code> 用户的密码进行登录。</p>
<p><strong>2. 执行以下命令来查看当前的密码策略：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW VARIABLES LIKE <span class="string">&#x27;validate_password%&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><strong>3. 根据需求修改以下变量：</strong></p>
<ul>
<li><p><code>validate_password.policy</code>：密码策略，默认值为<code>MEDIUM</code>。可以设置为<code>LOW</code>、<code>MEDIUM</code>、<code>STRONG</code>或者自定义。例如，可以将其设置为<code>LOW</code>以降低密码复杂性要求。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> <span class="keyword">GLOBAL</span> validate_password.policy <span class="operator">=</span> LOW;</span><br></pre></td></tr></table></figure>

<p>不同策略的要求：<br><code>0/LOW</code>：只验证长度；<br><code>1/MEDIUM</code>：验证长度、数字、大小写、特殊字符；默认值。<br><code>2/STRONG</code>：验证长度、数字、大小写、特殊字符、字典文件；</p>
</li>
<li><p><code>validate_password.length</code>：密码最小长度，默认值为<code>8</code>。可以根据需要修改最小密码长度。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> <span class="keyword">GLOBAL</span> validate_password.length <span class="operator">=</span> <span class="number">6</span>;</span><br></pre></td></tr></table></figure></li>
<li><p><code>validate_password.number_count</code>：密码中的数字要求，默认值为<code>1</code>。可以增加或减少数字的要求。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> <span class="keyword">GLOBAL</span> validate_password.number_count <span class="operator">=</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure></li>
<li><p><code>validate_password.special_char_count</code>：密码中特殊字符的要求，默认值为<code>1</code>。可以增加或减少特殊字符的要求。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> <span class="keyword">GLOBAL</span> validate_password.special_char_count <span class="operator">=</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure></li>
<li><p><code>validate_password.mixed_case_count</code>：密码中大写字母和小写字母的要求，默认值为<code>1</code>。可以增加或减少大写字母和小写字母的要求。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> <span class="keyword">GLOBAL</span> validate_password.mixed_case_count <span class="operator">=</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>4. 修改配置文件以使修改的密码策略永久生效。</strong></p>
<p>打开<code>MySQL</code>的配置文件（通常是 <code>mysqld.cnf</code> 或 <code>my.cnf</code>），添加下面的内容到文件中：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">validate_password.policy=LOW</span><br><span class="line">validate_password.length=6</span><br><span class="line">validate_password.number_count=1</span><br><span class="line">validate_password.special_char_count=1</span><br><span class="line">validate_password.mixed_case_count=1</span><br></pre></td></tr></table></figure>

<p><strong>5. 重启 MySQL 服务以应用更改：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl restart mysql</span><br></pre></td></tr></table></figure>

<p>完成上述步骤后，就已经修改了 <code>MySQL 8.0</code> 的密码策略。可以需求调整密码策略的参数，并确保设置合适的密码策略以提高数据库的安全性。</p>
<h3 id="配置文件路径"><a href="#配置文件路径" class="headerlink" title="配置文件路径"></a>配置文件路径</h3><p>通过 which 命令可以查看 mysql 安装路径，如下所示。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">which</span> mysql </span><br><span class="line">/usr/bin/mysql</span><br><span class="line">12</span><br></pre></td></tr></table></figure>

<p>如果服务器没有安装 mysql 命令，可以使用绝对路径下的 mysql 命令，查看配置文件在哪。如果 Linux 服务器已配置好 mysql 命令，也可以直接使用 mysql 命令查看。具体语句如下所示。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ /usr/bin/mysql --verbose --<span class="built_in">help</span> | grep -A 1 <span class="string">&#x27;Default options&#x27;</span></span><br><span class="line">$ mysql --verbose --<span class="built_in">help</span> | grep -A 1 <span class="string">&#x27;Default options&#x27;</span></span><br><span class="line">12</span><br></pre></td></tr></table></figure>

<p>2条命令分别执行完毕后的结果均显示如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Default options are <span class="built_in">read</span> from the following files <span class="keyword">in</span> the given order:</span><br><span class="line">/etc/my.cnf /etc/mysql/my.cnf /usr/etc/my.cnf ~/.my.cnf</span><br><span class="line">12</span><br></pre></td></tr></table></figure>

<p>结果显示：服务器首先读取的是 /etc/my.cnf 文件，如果该文件不存在则继续读 /etc/mysql/my.cnf 文件，如若文件还不存在便会去读 /usr/etc/my.cnf 文件，若文件仍不存在则继续读 ~/.my.cnf文件。</p>
<p>通过sudo tee写入</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;[mysqld]\nvalidate_password.policy=LOW\nvalidate_password.length=6\nvalidate_password.number_count=1\nvalidate_password.special_char_count=1\nvalidate_password.mixed_case_count=1&quot;</span> | <span class="built_in">sudo</span> <span class="built_in">tee</span> /etc/my.cnf</span><br></pre></td></tr></table></figure>

<h3 id="添加可供远程访问的用户"><a href="#添加可供远程访问的用户" class="headerlink" title="添加可供远程访问的用户"></a>添加可供远程访问的用户</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;%&#x27;</span> identified <span class="keyword">with</span> mysql_native_password <span class="keyword">by</span> <span class="string">&#x27;ace123456&#x27;</span>;</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">all</span> <span class="keyword">on</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">to</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;%&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h2 id="查看WSL的IP地址"><a href="#查看WSL的IP地址" class="headerlink" title="查看WSL的IP地址"></a>查看WSL的IP地址</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Powershell</span></span><br><span class="line">wsl -d CentOS7 hostname -I</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">输出</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">wsl: 检测到 localhost 代理配置，但未镜像到 WSL。NAT 模式下的 WSL 不支持 localhost 代理。</span></span><br><span class="line">172.19.111.46</span><br></pre></td></tr></table></figure>

<h2 id="查看服务状态"><a href="#查看服务状态" class="headerlink" title="查看服务状态"></a>查看服务状态</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl status mysqld</span><br><span class="line">chkconfig mysqld on</span><br><span class="line">重载systemctl配置，设置mysqld服务开机自启动。</span><br><span class="line"></span><br><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl <span class="built_in">enable</span> mysqld</span><br><span class="line">systemctl start mysqld</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@LAPTOP-BCC46KV0 init.d]# systemctl show mysqld -p After</span><br><span class="line">After=basic.target network.target syslog.target systemd-journald.socket system.slice</span><br><span class="line"></span><br><span class="line">systemctl status mysqld</span><br><span class="line">journalctl -xe</span><br><span class="line"></span><br><span class="line">systemctl show mysqld -p After</span><br><span class="line">systemctl show mysqld -p Before</span><br><span class="line">netstat -tulnp | grep :3306</span><br><span class="line"></span><br><span class="line"><span class="built_in">cat</span> /etc/passwd</span><br><span class="line"></span><br><span class="line">ps -eo pid,user,<span class="built_in">comm</span> | grep mysqld</span><br><span class="line"></span><br><span class="line">top -u mysql</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 写入windows环境变量+开启systemd			</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;[boot]\nsystemd=true\n&quot;</span> &gt;&gt; /etc/wsl.conf</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;[interop]\nappendWindowsPath=false\n&quot;</span> &gt;&gt; /etc/wsl.conf</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;### Windows ###</span></span><br><span class="line"><span class="string">export PATH=&quot;$PATH:/mnt/c/Users/Lenovo/AppData/Local/Microsoft/WindowsApps&quot;</span></span><br><span class="line"><span class="string">export PATH=&quot;$PATH:/mnt/c/Program Files/Docker/Docker/resources/bin&quot;</span></span><br><span class="line"><span class="string">export PATH=&quot;$PATH:/mnt/c/Windows&quot;&#x27;</span> &gt;&gt; /etc/profile</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#启动时间</span></span><br><span class="line"><span class="built_in">uptime</span> </span><br><span class="line"><span class="built_in">who</span> -b</span><br><span class="line"></span><br><span class="line">vim /etc/wsl.conf</span><br><span class="line"></span><br><span class="line">[network]</span><br><span class="line">hostname = node01 <span class="comment">#主机名称</span></span><br><span class="line">generateHosts = <span class="literal">false</span> <span class="comment">#自动生成hosts</span></span><br></pre></td></tr></table></figure>



<h1 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a>Nginx</h1><h2 id="nginx-conf"><a href="#nginx-conf" class="headerlink" title="nginx.conf"></a>nginx.conf</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">worker_processes</span>  <span class="number">1</span><span class="string">;</span>  <span class="comment"># 指定 Nginx 启动的工作进程数量</span></span><br><span class="line"></span><br><span class="line"><span class="string">events</span> &#123;</span><br><span class="line">    <span class="string">worker_connections</span>  <span class="number">1024</span><span class="string">;</span>  <span class="comment"># 每个工作进程允许的最大连接数</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">http</span> &#123;</span><br><span class="line">    <span class="string">include</span>       <span class="string">mime.types;</span>  <span class="comment"># 包含 MIME 类型配置文件</span></span><br><span class="line">    <span class="string">default_type</span>  <span class="string">application/json;</span>  <span class="comment"># 默认的 Content-Type</span></span><br><span class="line"></span><br><span class="line">    <span class="string">sendfile</span>        <span class="string">off;</span>  <span class="comment"># 禁用高效文件传输</span></span><br><span class="line"></span><br><span class="line">    <span class="string">keepalive_timeout</span>  <span class="number">65</span><span class="string">;</span>  <span class="comment"># 保持活动连接的超时时间</span></span><br><span class="line"></span><br><span class="line">    <span class="string">server</span> &#123;</span><br><span class="line">        <span class="string">listen</span>       <span class="number">8080</span><span class="string">;</span>  <span class="comment"># Nginx 监听的端口</span></span><br><span class="line">        <span class="string">server_name</span>  <span class="string">localhost;</span>  <span class="comment"># 虚拟主机名称</span></span><br><span class="line"></span><br><span class="line">        <span class="string">location</span> <span class="string">/</span> &#123;</span><br><span class="line">            <span class="string">root</span>   <span class="string">html/hmdp;</span>  <span class="comment"># 静态文件根目录</span></span><br><span class="line">            <span class="string">index</span>  <span class="string">index.html</span> <span class="string">index.htm;</span>  <span class="comment"># 默认索引文件</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="string">error_page</span>   <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span>  <span class="string">/50x.html;</span>  <span class="comment"># 自定义错误页面</span></span><br><span class="line">        <span class="string">location</span> <span class="string">=</span> <span class="string">/50x.html</span> &#123;</span><br><span class="line">            <span class="string">root</span>   <span class="string">html;</span>  <span class="comment"># 错误页面的具体位置</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="string">location</span> <span class="string">/api</span> &#123;  </span><br><span class="line">            <span class="string">default_type</span>  <span class="string">application/json;</span>  <span class="comment"># 设置默认 Content-Type</span></span><br><span class="line"></span><br><span class="line">            <span class="string">keepalive_timeout</span>   <span class="string">30s;</span>  <span class="comment"># 对于 /api 的连接保持活动超时时间</span></span><br><span class="line">            <span class="string">keepalive_requests</span>  <span class="number">1000</span><span class="string">;</span>  <span class="comment"># 允许的最大请求数</span></span><br><span class="line"></span><br><span class="line">            <span class="string">proxy_http_version</span> <span class="number">1.1</span><span class="string">;</span>  <span class="comment"># 设置代理请求使用的 HTTP 版本</span></span><br><span class="line"></span><br><span class="line">            <span class="string">rewrite</span> <span class="string">/api(/.*)</span> <span class="string">$1</span> <span class="string">break;</span>  <span class="comment"># 重写请求的 URI</span></span><br><span class="line"></span><br><span class="line">            <span class="string">proxy_pass_request_headers</span> <span class="string">on;</span>  <span class="comment"># 转发请求头</span></span><br><span class="line"></span><br><span class="line">            <span class="string">proxy_next_upstream</span> <span class="string">error</span> <span class="string">timeout;</span>  <span class="comment"># 在错误或超时情况下尝试下一个后端服务器</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">#proxy_pass http://127.0.0.1:8081;  # 将请求转发到后端服务</span></span><br><span class="line">            <span class="string">proxy_pass</span> <span class="string">http://backend;</span>  <span class="comment"># 可以使用 upstream 定义的 backend 服务器</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">#将请求转发</span></span><br><span class="line">    <span class="string">upstream</span> <span class="string">backend</span> &#123;</span><br><span class="line">        <span class="string">server</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="string">:8081</span> <span class="string">max_fails=5</span> <span class="string">fail_timeout=10s</span> <span class="string">weight=1;</span>  <span class="comment"># 后端服务器配置</span></span><br><span class="line">        <span class="string">server</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="string">:8082</span> <span class="string">max_fails=5</span> <span class="string">fail_timeout=10s</span> <span class="string">weight=1;</span>  <span class="comment"># 另一个后端服务器的注释</span></span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>==虚拟主机（反向代理）Reverse Proxy==：<code>server</code> 中的<code>listen 8080</code> <code>server_name localhost</code> 分别表示虚拟主机的端口和域名，客户端发送请求就可以把虚拟主机当做服务器。</p>
<p>==请求转发（负载均衡）Request Forwarding &amp; Load Balancing==：<code>location /api</code> 表示nginx接管<code>/api</code>路径下的请求，<code>rewrite</code>表示会将请求的URL重写，因为在后端并不存在接管/api的Controller，<code>proxy_pass</code>表示请求转发的目标，这里转发到了backend，对应2个服务器地址，默认采用轮询(polling)机制</p>
<img src="https://pub-9e727eae11e040a4aa2b1feedc2608d2.r2.dev/PicGo/image-20241104184639596.png" alt="image-20241104184639596" style="zoom: 50%;" />

<p>如图，前端所有AJAX请求的URL都有<code>/api</code>前缀，前端向nginx发送请求，URL为<a target="_blank" rel="noopener" href="http://localhost:8080/api/shop/1%EF%BC%8C%E7%BB%8F%E8%BF%87Nginx%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%E5%88%B0http://127.0.0.1/shop/1%E4%B8%8B%EF%BC%8C%E6%AD%A3%E5%A5%BD%E5%B0%B1%E6%98%AF%E5%90%8E%E7%AB%AF%E7%9A%84Controller%E6%89%80%E5%9C%A8%E7%9A%84URL">http://localhost:8080/api/shop/1，经过Nginx端口转发到http://127.0.0.1/shop/1下，正好就是后端的Controller所在的URL</a></p>
<p>==静态文件服务 HTTP Server==： <code>location /</code> 表示nginx将接管 <code>/</code> 路径下的请求    <code>root</code>表示静态文件的具体位置</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/linux/" rel="tag"># linux</a>
              <a href="/tags/docker/" rel="tag"># docker</a>
              <a href="/tags/nginx/" rel="tag"># nginx</a>
              <a href="/tags/ssh/" rel="tag"># ssh</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2024/11/30/juc-in-one/" rel="prev" title="java.util.concurrent">
                  <i class="fa fa-angle-left"></i> java.util.concurrent
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2024/12/26/netty-best-practice/" rel="next" title="Netty 最佳实践">
                  Netty 最佳实践 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 2023 – 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">碎梦</span>
  </div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/scatteredream" class="github-corner" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>

</body>
</html>
